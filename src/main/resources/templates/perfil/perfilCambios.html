<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Profile</title>
<link th:href="@{/css/perfil2.css}" rel="stylesheet" type="text/css" />
<link href="https://cdn.usebootstrap.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"  />

</head>
<body>

    <div class="main-body">
    
          <!-- Breadcrumb -->
          <nav aria-label="breadcrumb" class="main-breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a th:href="@{/perfilResumen}">Home</a></li>
              <li class="breadcrumb-item"><a th:href="@{/perfilPedidos}">Ver pedidos</a></li>
              <li class="breadcrumb-item"><a th:href="@{/shop}">Volver a la tienda</a></li>
              
            </ol>
          </nav>
          <!-- /Breadcrumb -->
          
           <div class="container">
            <div class="col-md-4 mb-3">
              <div class="card">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center">
                    <img th:src="@{/img/user.jpg}" alt="" class="rounded-circle" width="150">
                    <div class="mt-3">
                      <h4 th:text="${user.nombre} + ' ' + ${user.apellido1} + ' ' + ${user.apellido2}"> </h4>

                    </div>
                  </div>
                </div>
              </div>
            </div>
            </div>
    
    		<form th:action="@{/modificarDatosPost}" th:object="${user}" method="post" id="formCambios">
				<div class="col-lg-8">
					<div class="card">
						<div class="card-body">
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Name</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" minlength="3" class="form-control" value="${user.nombre}" th:field="*{nombre}">
								</div>
							</div>
							
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">First Surname</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" minlength="3" class="form-control" value="${user.apellido1}" th:field="*{apellido1}">
								</div>
							</div>
							
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Second Surname</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" minlength="3" class="form-control" value="${user.apellido2}" th:field="*{apellido2}">
								</div>
							</div>
							
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Email</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="${user.email}" th:field="*{email}">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Phone</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" minlength="9" maxlength="9" class="form-control" value="${user.telefono}" th:field="*{telefono}">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Address</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="${user.dirección}" th:field="*{direccion}">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Province</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="${user.provincia}" th:field="*{provincia}">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">City</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" class="form-control" value="${user.localidad}" th:field="*{localidad}">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">NIF</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									<input type="text" minlength="9" maxlength="9" class="form-control" value="${user.dni}" th:field="*{dni}">
								</div>
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Password</h6>
								</div>
          <div class="col-sm-9 text-secondary">
            <div class="input-group mb-3">
              <input th:field="*{clave}" name="password" type="password" minlength="6" value="" class="input form-control" id="pass1" required aria-label="password" aria-describedby="basic-addon1" />
              <div class="input-group-append">
                <span class="input-group-text" onclick="password_show_hide();">
                  <i class="fas fa-eye" id="show_eye"></i>
                  <i class="fas fa-eye-slash d-none" id="hide_eye"></i>
                </span>
              </div>
            </div>
          </div>

								
							</div>
							<div class="row mb-3">
								<div class="col-sm-3">
									<h6 class="mb-0">Repeat Password</h6>
								</div>
          <div class="col-sm-9 text-secondary">
            <div class="input-group mb-3">
              <input name="password" type="password"  value="" minlength="6" class="input form-control" id="pass2" required aria-label="password" aria-describedby="basic-addon1" />
              <div class="input-group-append">
                <span class="input-group-text" onclick="password_show_hide();">
                  <i class="fas fa-eye" id="show_eye"></i>
                  <i class="fas fa-eye-slash d-none" id="hide_eye"></i>
                </span>
              </div>
            </div>
          </div>
							<input type="hidden" class="form-control" value="${user.fecha_alta}" th:field="*{fecha_alta}">
							<input type="hidden" class="form-control" value="${user.id_rol}" th:field="*{id_rol}">
							<input type="hidden" class="form-control" value="${user.imagen}" th:field="*{imagen}">
							<input type="hidden" class="form-control" value="${user.id}" th:field="*{id}">
							
						<div class="row">
                    		<div class="col-sm-12">
                    		<p id="err" class="text-danger"> </p>
                      			<button type="submit" class="btn btn-info" th:href="@{/modificarDatos}">Save Changes</button>
                    		</div>
                 		 </div>
                		 </div>
           		 </div>
     		</div>
     		</div>
		</form>
	</div>
		 <script>
		 
		  function password_show_hide() {
			  var x = document.getElementById("pass2");
			  var y = document.getElementById("pass1");
			  var show_eye = document.getElementById("show_eye");
			  var hide_eye = document.getElementById("hide_eye");
			  hide_eye.classList.remove("d-none");
			  if (x.type === "password") {
			    x.type = "text";
			    show_eye.style.display = "none";
			    hide_eye.style.display = "block";
			  } else {
			    x.type = "password";
			    show_eye.style.display = "block";
			    hide_eye.style.display = "none";
			  }
			  
			  if (y.type === "password") {
				    y.type = "text";
				    show_eye.style.display = "none";
				    hide_eye.style.display = "block";
				  } else {
				    y.type = "password";
				    show_eye.style.display = "block";
				    hide_eye.style.display = "none";
				  }
			}
		 
		 formCambios.addEventListener("submit", (e) => { // Escuchar cuando se envíe el formulario
 			if (pass1.value !== pass2.value) { // Comprobar si los valores de los inputs son iguales, si no lo son continuar
   	 		e.preventDefault(); // Prevenir que la página se recargue
   			err.innerHTML = "Las contraseñas no coinciden"; // Notificar al usuario
    		setTimeout(() => {
      		err.innerHTML = " ";
   		 }, 1200); // Esperar 1.2 segundos y quitar el mensaje
 		 }
		});
	</script>
	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" ></script>
</body>
</html>